[
    {
        "instruction": "请从代码片段中摘要出该段代码的主要功能,并描述其主要业务逻辑。",
        "input": "/**\n* 维护个人存款证明基本信息\n* Generated by APStack AICode\n* 【设计侧弃用，代码暂不删除】\n*\n* @AI Content:\n* @AI Generated on:\n* @Review status: unreviewed\n*/\n*/\npublic void maintainDepositCertBasicInfo(MaintainDepositCertBasicInfoInput maintainIn) {\n//个人存款证明子合约\nDepositContractDmsPojo.DepositCertSubContractPojo basicInfoPojo = maintainIn.getDepositCertBasicInfo();\nCommUtil.copyProperties(this, basicInfoPojo);\n\n// 1、存款证明操作方式==重打\nif (maintainIn.getDepCertificationOperateMode() == DomainBaseDEnum.E_DEPOSITCERT_OPE_MODE.RETYPE) {\n\nthis.setPrintTimes(basicInfoPojo.getPrintTimes() + 1); //累计打印次数\nthis.setAccumulatedIssuingTimes(basicInfoPojo.getAccumulatedIssuingTimes() + maintainIn.getApplyCopies()); //累计签发份数\n\n//个人存款证明凭证信息\nList<DepositContractDmsPojo.DepositCertVoucherInfoPojo> voucherInfoListIn = basicInfoPojo.getDepositCertVoucherInfoList();\n\nif (CommUtil.isNotNull(voucherInfoListIn) && voucherInfoListIn.size() > 0) {\nList<DepositCertVoucherInfo> certVoucherInfoDoList = new ArrayList<>();\nfor (int i = 0; i < voucherInfoListIn.size(); i++) {\nDepositCertVoucherInfo certVoucherInfoDO = new DepositCertVoucherInfo();\nDepositContractDmsPojo.DepositCertVoucherInfoPojo depositCertVoucherInfo = voucherInfoListIn.get(i);\nCommUtil.copyProperties(certVoucherInfoDO, depositCertVoucherInfo);\ncertVoucherInfoDO.setDepCertRegisterNum(this.getDepCertRegisterNum()); //存款证明登记号\ncertVoucherInfoDO.setVoucherNo(String.format(\"%08d\", (maintainIn.getStartVoucherNo()) + i)); // #凭证号码：8位，不足补0\ncertVoucherInfoDO.setPrintDate(RunEnvTools.getTransDate()); //打印日期\ncertVoucherInfoDO.setRevokeDate(null); //撤销日期\ncertVoucherInfoDO.setPrintTimes(basicInfoPojo.getPrintTimes()); //打印次数\ncertVoucherInfoDO.setValidStatus(DomainBaseWEnum.E_WHETHER_FLAG.YES); //有效标志\ncertVoucherInfoDO.setDataUpdateFlag(DomainBaseDEnum.E_DATA_UPDATE_FLAG.UPDATED);\ncertVoucherInfoDoList.add(certVoucherInfoDO);\n}\nthis.setDepositCertVoucherInfoList(certVoucherInfoDoList);\nmaintainIn.setValidFlag(DomainBaseVEnum.E_VALID_FLAG.USE);\n}\n\n} else if (maintainIn.getDepCertificationOperateMode() == DomainBaseDEnum.E_DEPOSITCERT_OPE_MODE.CANCEL) {\n// 2、存款证明操作方式==撤销\n//2.1 个人存款证明子合约信息\nLong accumulatedReTimes = basicInfoPojo.getAccumulatedRetrievingTimes() + maintainIn.getApplyCopies(); //累计回收份数\nbasicInfoPojo.setAccumulatedRetrievingTimes(accumulatedReTimes); //累计回收份数\n\n//比较#累计回收份数是否等于#累计签发份数\nif (CommUtil.compare(accumulatedReTimes, basicInfoPojo.getAccumulatedIssuingTimes()) == 0) {\n\nthis.setRevokeDate(RunEnvTools.getTransDate()); //撤销日期\n\n//2.2 证明凭证信息\nif (CommUtil.isNotNull(basicInfoPojo.getDepositCertVoucherInfoList()) && basicInfoPojo.getDepositCertVoucherInfoList().getValues().size() > 0) {\nList<DepositCertVoucherInfo> voucherDoList = new ArrayList<>();\nfor (int i = 0; i < basicInfoPojo.getDepositCertVoucherInfoList().getValues().size(); i++) {\nDepositCertVoucherInfo voucherDo = new DepositCertVoucherInfo();\nCommUtil.copyProperties(voucherDo, basicInfoPojo.getDepositCertVoucherInfoList().get(i));\nvoucherDo.setRevokeDate(RunEnvTools.getTransDate()); //撤销日期\nvoucherDo.setValidStatus(DomainBaseWEnum.E_WHETHER_FLAG.NO); //有效标志\nvoucherDoList.add(voucherDo);\n}\nthis.setDepositCertVoucherInfoList(voucherDoList);\n}\n//2.3 个人存款证明合约信息\nif (CommUtil.isNotNull(basicInfoPojo.getDepositCertContractInfoList()) && basicInfoPojo.getDepositCertContractInfoList().getValues().size() > 0) {\nList<DepositCertContractInfo> certContractInfoList = new ArrayList<>();\nfor (int i = 0; i < basicInfoPojo.getDepositCertContractInfoList().getValues().size(); i++) {\nDepositCertContractInfo certContractDO = new DepositCertContractInfo();\nCommUtil.copyProperties(certContractDO, basicInfoPojo.getDepositCertContractInfoList().get(i));\ncertContractDO.setValidStatus(DomainBaseWEnum.E_WHETHER_FLAG.NO); //有效标志\ncertContractDO.setDataUpdateFlag(DomainBaseDEnum.E_DATA_UPDATE_FLAG.UPDATED);\ncertContractInfoList.add(certContractDO);\n}\nthis.setDepositCertContractInfoList(certContractInfoList);\n}\nmaintainIn.setValidFlag(DomainBaseVEnum.E_VALID_FLAG.DISABLE);\n} else {\n//  进行“输入.申请份数”次循环，\nList<DepositContractDmsPojo.DepositCertVoucherInfoPojo> voucherInfoList = basicInfoPojo.getDepositCertVoucherInfoList().getValues();\n//起始凭证号码\nLong voucherNum = Long.getLong(maintainIn.getStartVoucherNo());\nif (CommUtil.isNotNull(voucherInfoList) && voucherInfoList.size() > 0) {\nList<DepositCertVoucherInfo> voucherInfoOutputList = new ArrayList<>();\nfor (int i = 0; i < maintainIn.getApplyCopies(); i++) {\nString currentVoucherNo = String.format(\"%08d\", (voucherNum + i)); // #凭证号码\n// 匹配 #凭证号码 是否等于输入.【个人存款证明凭证信息】.凭证号码\nDepositContractDmsPojo.DepositCertVoucherInfoPojo voucherInfoPojo = voucherInfoList.stream().filter(item -> item.getVoucherNo().equals(currentVoucherNo)).findAny().get();\nif (CommUtil.isNotNull(voucherInfoPojo)) {\nDepositCertVoucherInfo voucherDo = new DepositCertVoucherInfo();\nCommUtil.copyProperties(voucherDo, voucherInfoPojo);\nvoucherDo.setValidStatus(DomainBaseWEnum.E_WHETHER_FLAG.NO); //有效标志\nvoucherDo.setRevokeDate(RunEnvTools.getTransDate()); //撤销日期\nvoucherDo.setDataUpdateFlag(DomainBaseDEnum.E_DATA_UPDATE_FLAG.UPDATED);\nvoucherInfoOutputList.add(voucherDo);\n}\n}\nthis.setDepositCertVoucherInfoList(voucherInfoOutputList);  //证明凭证信息\n}\nmaintainIn.setValidFlag(DomainBaseVEnum.E_VALID_FLAG.DISABLE);\n}\n}\n\n}",
        "chosen": "该方法主要用于维护个人存款证明信息，业务规则如下:\n\n1. 如果【维护个人存款证明输入】的存款证明操作方式为重打:\n1.1 将【个人存款证明子合约】的打印次数】加1。\n1.2 将【个人存款证明子合约】的累计签发份数】加【维护个人存款证明输入】的申请份数。\n1.3 初始化并更新个人存款证明凭证信息:\n1.4 设置【维护个人存款证明输入】的有效标志为使用。\n\n2. 如果【维护个人存款证明输入】的存款证明操作方式为撤销:\n2.1 更新个人存款证明子合约信息",
        "rejected": "该方法主要用于维护个人存款证明信息，业务规则如下:\n\n1. 如果【维护个人存款证明输入】的存款证明操作方式为重打:\n1.1 将【个人存款证明子合约】的打印次数】加1。\n1.2 将【个人存款证明子合约】的累计签发份数】加【维护个人存款证明输入】的申请份数。\n1.3 初始化并更新个人存款证明凭证信息:\n1.3.1 设置【个人存款证明凭证信息】的存款证明登记号为当前存款证明登记号。\n1.3.2 设置【个人存款证明凭证信息】的凭证号码为8位数，不足补0。\n1.3.3 设置【个人存款证明凭证信息】的打印日期为当前交易日期。\n1.3.4 将【个人存款证明凭证信息】的撤销日期置空。\n1.3.5 设置【个人存款证明凭证信息】的打印次数为当前打印次数。\n1.3.6 设置【个人存款证明凭证信息】的有效标志为是。\n1.3.7 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n1.4 设置【维护个人存款证明输入】的有效标志为使用。\n\n2. 如果【维护个人存款证明输入】的存款证明操作方式为撤销:\n2.1 更新个人存款证明子合约信息:\n2.1.1 将【个人存款证明子合约】的累计回收份数加1。\n2.1.2 如果【个人存款证明子合约】的累计回收份数】等于【个人存款证明子合约】的累计签发份数:\n2.1.2.1 设置【个人存款证明子合约】的撤销日期为当前交易日期。\n2.1.2.2 设置【个人存款证明子合约】的凭证信息:\n2.1.2.2.1 设置【个人存款证明子合约】的凭证信息的撤销日期为当前交易日期。\n2.1.2.2.2 设置【个人存款证明子合约】的凭证信息的有效标志为否。\n2.1.2.3 设置【个人存款证明合约信息】:\n2.1.2.3.1 设置【个人存款证明合约信息】的有效标志为否。\n2.1.2.3.2 设置【个人存款证明合约信息】的数据更新标志为已更新。\n2.1.2.4 设置【维护个人存款证明输入】的有效标志为停用。\n2.1.3 如果不相等:\n2.1.3.1 重复【维护个人存款证明输入】的申请份数次:\n2.1.3.1.1 设置起始凭证号码。\n2.1.3.1.2 初始化并更新个人存款证明凭证信息:\n2.1.3.1.2.1 设置【个人存款证明凭证信息】的有效标志为否。\n2.1.3.1.2.2 设置【个人存款证明凭证信息】的撤销日期为当前交易日期。\n2.1.3.1.2.3 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.4 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.5 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.6 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.7 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.8 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.9 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n2.1.3.1.2.10 设置【个人存款证明凭证信息】的数据更新标志为已更新。\n"
    }
]