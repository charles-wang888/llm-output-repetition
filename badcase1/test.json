[
    {
        "text": "请从代码片段中摘要出该段代码的主要功能,并描述其主要业务逻辑。\n/**\n     * 检查账户解控条件\n    *\n     * @AI Content: 1、如果 [this.控制解控标志]等于“解控”，则报错：“YACTB127-指定控制编号的账户控制已经解除控制”;\n    2、如果 [this.资金账号]不等于[输入.资金账号]，则报错：“YACTB128-输入的资金账号与控制资金账号不一致”;\n    3、如果交易渠道为柜面(公共上下文.渠道代码==\"柜面\")且[公共上下文.交易柜员]不等于[this.交易柜员号]，则报错：“YACTB129-柜面解控请在原控制机构办理”;\n\n    4、如果[this.冻结来源]等于“冻结”,检查执法人信息，信息：\n    4.1、根据[输入.执法人执法信息LawEnforcementInfo]的调用对应构造方法构建【有权机关执法信息ControlEnforcement】#解控执法人信息。\n    4.2、调用#解控执法人信息的[检查执法执行方信息]方法。\n    4.3、调用[this.有权机构执法信息]的[检查解控执法执行方信息]方法;(输入：输入.执法人执法信息LawEnforcementInfo)\n\n    5、如果[输入.冻结操作标志]等于“解控”且[this.限制类型]等于\"金额冻结\"，处理如下：\n    5.1、如果[输入.解控金额]<0，则报错:\"YACTB132-解控金额必须大于0\"；\n    5.2、如果[输入.解控金额]>[this.需冻/控金额]-[this.已解控金额]，则报错：“YACTB133-解控金额不能大于控制金额”;\n\n    6、如果[输入.冻结操作标志]等于“部分解冻\"，处理如下：\n    6.1、如果[输入.解控金额]<0，则报错:\"YACTB132-解控金额必须大于0\"；\n    6.2、如果[this.限制类型]不等于\"金额冻结”，则报错：“YACTB134-只有金额冻结才能进行部分解冻”;\n    6.3、如果[输入.解控金额]>=[this.需冻/控金额]-[this.已解控金额]，则报错：“YACTB136-部分解冻解控金额不能大于控制金额”;\n     * @AI Generated on: 2023-06-06 20:30:58\n     * @Review status: unreviewed\n     *\n     */\n     */\n    public void checkReleaseCtrlAcct(AccountDmsDto.ReleaseControlAcctIn releaseControlAcctIn) {\n        if (this.ctrlDecontrolFlag == DomainBaseCEnum.E_CONTROL_DECONTROL_FLAG.DECONTROL){\n            throw AccountCommonError.AccountCommon.EACTB127();\n        }\n        if (!CommUtil.equals(this.fundAcctNo, releaseControlAcctIn.getFundAcctNo())){\n            throw AccountCommonError.AccountCommon.EACTB128();\n        }\n        if (RunEnvTools.getStartChannelCode() == AccountConstant.CNT && cn.xxx.aps.online.engine.core.util.CommUtil.equals(this.transBranchNo, RunEnvTools.getTransBranchNo())){\n            throw AccountCommonError.AccountCommon.EACTB129();\n        }\n        String sysDate = CommDateTools.getCurrentDate();\n        if (this.freezeSrc == DomainBaseFEnum.E_FREEZE_SOURCE.FREEZE && CommDateTools.compareDate(sysDate, this.ctrlEndDate) < 1){\n            ControlEnforcement controlEnforcement = new ControlEnforcement(releaseControlAcctIn.getLawEnforcementInfo());\n            this.lawEnforceInfo.checkDecontrolLawEnforInfo(releaseControlAcctIn.getLawEnforcementInfo());\n            this.lawEnforceInfo = controlEnforcement;\n            this.lawEnforceInfo.checkControlLawEnforInfo();\n        }\n        if (releaseControlAcctIn.getFreezeOperateFlag() == DomainBaseFEnum.E_FREEZE_OPT_FLAG._6 && this.restrictType == DomainBaseREnum.E_RESTRICT_TYPE.AMOUNT_FREEZE){\n            if (CommUtil.compare(releaseControlAcctIn.getDecontrolAmt(), BigDecimal.ZERO) < 0){\n                throw AccountCommonError.AccountCommon.EACTB132();\n            }\n            if (CommUtil.compare(releaseControlAcctIn.getDecontrolAmt(), this.needFreezeCtrlAmt.subtract(this.alreadyDecontrolAmt)) > 0){\n                throw AccountCommonError.AccountCommon.EACTB133();\n            }\n        }\n        if (releaseControlAcctIn.getFreezeOperateFlag() == DomainBaseFEnum.E_FREEZE_OPT_FLAG._3){\n            if (this.restrictType != DomainBaseREnum.E_RESTRICT_TYPE.AMOUNT_FREEZE){\n                throw AccountCommonError.AccountCommon.EACTB134();\n            }\n            if (CommUtil.compare(releaseControlAcctIn.getDecontrolAmt(), BigDecimal.ZERO) < 0){\n                throw AccountCommonError.AccountCommon.EACTB132();\n            }\n            if (CommUtil.compare(releaseControlAcctIn.getDecontrolAmt(), this.needFreezeCtrlAmt.subtract(this.alreadyDecontrolAmt)) >= 0){\n                throw AccountCommonError.AccountCommon.EACTB136();\n            }\n        }\n    }",
        "standard_answer": "该方法主要用于检查账户解控条件，业务规则如下：\n\n1. 检查【控制解控标志】\n    1.1 如果【控制解控标志】等于“解控”，则报错：“指定控制编号的账户控制已经解除控制”\n\n2. 检查【资金账号】\n    2.1 如果【资金账号】不等于【输入.资金账号】，则报错：“输入的资金账号与控制资金账号不一致”\n\n3. 检查交易渠道\n    3.1 如果交易渠道为柜面(【公共上下文.渠道代码】==\"柜面\")且【公共上下文.交易柜员】不等于【交易柜员号】，则报错：“柜面解控请在原控制机构办理”\n\n4. 检查【冻结来源】是否为“冻结”\n    4.1 如果【冻结来源】等于“冻结”且当前日期小于等于【控制结束日期】：\n        4.1.1 构建【有权机关执法信息】。\n        4.1.2 调用【有权机关执法信息.检查执法执行方信息】。\n        4.1.3 调用【有权机构执法信息.检查解控执法执行方信息】。\n\n5. 检查【冻结操作标志】并且【限制类型】为\"金额冻结\"\n    5.1 检查【冻结操作标志】是否为“解控”\n        5.1.1 如果【解控金额】<0，则报错:\"解控金额必须大于0\"\n        5.1.2 如果【解控金额】>[需冻/控金额-已解控金额]，则报错：“解控金额不能大于控制金额”\n    5.2 检查【冻结操作标志】是否为“部分解冻”\n        5.2.1 如果【解控金额】<0，则报错:\"解控金额必须大于0\"\n        5.2.2 如果【限制类型】不等于\"金额冻结\"，则报错：“只有金额冻结才能进行部分解冻”\n        5.2.3 如果【解控金额】>= [需冻/控金额-已解控金额]，则报错：“部分解冻解控金额不能大于控制金额”"
    }
]